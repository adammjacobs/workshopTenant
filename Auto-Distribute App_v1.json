{"blocks":[{"id":"CDB19D30-8FEA-4BA2-B71D-FC3C9B132312","type":"StartBlock","disabled":false,"name":"UserCreated","displayName":"User Created","comment":"","childId":"1227C740-B21D-4409-AE18-4420654AD0BB","inputs":[{"id":"run_mode","value":"webhook","type":"select","structure":{}},{"id":"datasourcetype_guid","value":"61a87510-c7a3-11ea-95da-0fb0c241e75c","type":"select","displayValue":"Qlik Cloud Services","structure":[]},{"id":"webhook_event_guid","value":"5be4c220-6156-11eb-a3df-fdbac6cc38a0","type":"select","displayValue":"User Created","structure":[]},{"id":"test_payload","value":"{\n  \"data\": {\n    \"id\": \"4Py5kq5i3OhUWAfBauEyPd423eSNJF8X\",\n    \"subject\": \"auth0|f6b3fd7b7a3f625904134b89379372375300cff2dafc31a65a17cc093bb690b2\",\n    \"tenantId\": \"WL69WlNT4PRbwAA8EZ1sDblqjthluHL1\"\n  },\n  \"source\": \"com.qlik/users\",\n  \"eventId\": \"CGMoX8zP3RaPcGLKxQ_Sy5N4O0bh9XxE\",\n  \"eventTime\": \"2021-09-09T09:32:53.782Z\",\n  \"eventType\": \"com.qlik.v1.user.created\",\n  \"extensions\": {\n    \"userId\": \"BlVarUAUM9I0ei3MmKMejlDaF1sKPnN5\",\n    \"tenantId\": \"WL69WlNT4PRbwAA8EZ1sDblqjthluHL1\"\n  },\n  \"contentType\": \"application/json\",\n  \"eventTypeVersion\": \"1.0.0\",\n  \"cloudEventsVersion\": \"0.1\"\n}","type":"json","structure":[]},{"id":"webhook_documentation","value":null,"type":"string","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":100,"y":100,"logo":"https://cdn.qlikcloud.com/automations/logos/21dd4ad9985d490e7bfd7a644d783489.png"},{"id":"12DD593A-60D7-4944-BE5A-753129700A74","type":"EndpointBlock","disabled":false,"name":"listItems","displayName":"Qlik Cloud Services - List Items","comment":"","childId":"3A9FD60D-16FE-4C07-9AB8-E1030D496AF8","inputs":[{"id":"439c6980-6f70-11eb-84de-efd628b6cc54","value":null,"type":"select","structure":[]},{"id":"1099dd00-107f-11ec-902a-5bf8dc83fa53","value":"17e5fc30-107f-11ec-9b18-dd9ad1848dd7","type":"select","displayValue":"app","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":366,"y":400,"loopBlockId":"EC1F0F43-1270-46F0-B8F5-6638434B7022","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"f041ca70-c7a6-11ea-97f1-314ae0d6795c","endpoint_role":"list"},{"id":"C047EAC0-84FF-4BBA-9889-FA2F1ECDA070","type":"VariableBlock","disabled":false,"name":"appIds","displayName":"Variable - appIds","comment":"Creates a list of app IDs that match the condition.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":305,"y":402,"variableGuid":"15ACE45F-052A-495D-B273-B5489B883877","operations":[{"id":"add_item","key":"1A06137A-AD75-45FC-8760-30DC3A022340","name":"Add item to { variable }","value":"{ $.listItems.item.resourceAttributes.id }"}]},{"id":"EC1F0F43-1270-46F0-B8F5-6638434B7022","type":"IfElseBlock","disabled":false,"name":"condition","displayName":"Condition","comment":"Looks for apps in Workshop Stage with \"distribute\" as tag, but not \"recall\"","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.listItems.item.meta.tags}","input2":"distribute","operator":"contain"},{"input1":"{ $.listItems.item.meta.tags}","input2":"recall","operator":"doesntContain"},{"input1":"{$.listItems.item.spaceId}","input2":"{$.getSpace.id}","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":242,"y":267,"childTrueId":"C047EAC0-84FF-4BBA-9889-FA2F1ECDA070","childFalseId":null},{"id":"3A9FD60D-16FE-4C07-9AB8-E1030D496AF8","type":"ForEachBlock","disabled":false,"name":"loop2","displayName":"Loop 2","comment":"Loops through list of App IDs from Variable - appIds","childId":null,"inputs":[{"id":"input","value":"{$.appIds}","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":114,"y":842,"loopBlockId":"85E453D2-3D12-4FEA-AA1C-D6B1C5EE7013"},{"id":"BF5B62AE-8EFB-4CFE-9099-D0C9F0F23E87","type":"EndpointBlock","disabled":false,"name":"copyApp","displayName":"Qlik Cloud Services - Copy App","comment":"","childId":"DC5F68DE-1282-4279-A84D-AC2F48E64721","inputs":[{"id":"97322d20-5f1a-11eb-b60f-c78b64a85ca9","value":"{$.loop2.item}","type":"string","structure":[]},{"id":"973a0420-5f1a-11eb-992c-4faefbbdefcb","value":null,"type":"string","structure":[]},{"id":"b4719c30-5f1a-11eb-8f7c-05d48bd9af1f","value":"{$.GetAppInformation.info.attributes.name}","type":"string","structure":[]},{"id":"c0a48ba0-5f1a-11eb-8b6b-a71406d285c9","value":null,"type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":500,"y":1757,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"971da4c0-5f1a-11eb-b024-5bdf8a364659","endpoint_role":"update"},{"id":"DC5F68DE-1282-4279-A84D-AC2F48E64721","type":"EndpointBlock","disabled":false,"name":"updateAppOwner","displayName":"Qlik Cloud Services - Update App Owner","comment":"","childId":null,"inputs":[{"id":"161c2710-67b8-11eb-8ebb-098ca1d1916d","value":"{$.copyApp.attributes.id}","type":"string","structure":[]},{"id":"463d8bd0-67b8-11eb-a6f7-015670fcd8dc","value":"{$.getUser.id}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":573,"y":1710,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"1609b6a0-67b8-11eb-af23-9f2fd7d43be0","endpoint_role":"update"},{"id":"5D1D1BC3-DE31-4526-8E35-D1CA665F99AC","type":"SnippetBlock","disabled":false,"name":"GetAppInformation","displayName":"Qlik Cloud Services - Get App Information","comment":"","childId":"BF5B62AE-8EFB-4CFE-9099-D0C9F0F23E87","inputs":[{"id":"d3acbdc0-a8d2-11eb-8827-056900eab788","value":"{$.loop2.item}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":333,"y":1755,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"d3a8d4f0-a8d2-11eb-a81d-ffabb68491fb"},{"id":"85E453D2-3D12-4FEA-AA1C-D6B1C5EE7013","type":"EndpointBlock","disabled":false,"name":"getUser","displayName":"Qlik Cloud Services - Get User","comment":"","childId":"5D1D1BC3-DE31-4526-8E35-D1CA665F99AC","inputs":[{"id":"8eedf1d0-c7a5-11ea-9022-0fb2ce625902","value":"{$.UserCreated.data.id}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":249,"y":884,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"7e670290-c7a5-11ea-9a9c-6dd2b282df86","endpoint_role":"get"},{"id":"BB99438B-105E-4D67-BD3C-EFBC50D19074","type":"EndpointBlock","disabled":false,"name":"getSpace","displayName":"Qlik Cloud Services - Get Space","comment":"MUST ENTER SPACE! Found via \"do lookup\".  Space is \"Workshop Stage\"","childId":null,"inputs":[{"id":"92f7bcd0-6d2d-11eb-9088-69419de8f253","value":"{ $.listSpaces.item.id }","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":407,"y":59,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"92afefd0-6d2d-11eb-aee2-055653605a8e","endpoint_role":"get"},{"id":"BCDC2FF1-48F2-4E71-A04E-D281019A095B","type":"EndpointBlock","disabled":false,"name":"getCurrentTenantInfo","displayName":"Qlik Cloud Services - Get Current Tenant Info","comment":"","childId":"D63B1D7F-F3C8-403F-8B0F-68E4DB4E7741","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-190,"y":99,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"55051480-cb86-11ec-b746-892c1d04114e","endpoint_role":"get"},{"id":"D63B1D7F-F3C8-403F-8B0F-68E4DB4E7741","type":"SnippetBlock","disabled":false,"name":"GetTenantNameAndRegion","displayName":"Qlik Platform Operations - Get Tenant Name And Region","comment":"","childId":"864F2DB9-993A-478E-BF02-1F263771F287","inputs":[{"id":"575d1740-b1e2-11ed-958a-598edfec33b8","value":"{ host: { $.getCurrentTenantInfo.links.self.href } }","type":"string","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-216,"y":161,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","snippet_guid":"bd5c1ce0-ad14-11ed-83f6-1d42e53790dd"},{"id":"864F2DB9-993A-478E-BF02-1F263771F287","type":"EndpointBlock","disabled":false,"name":"listSpaces","displayName":"Qlik Platform Operations - List Spaces","comment":"","childId":"12DD593A-60D7-4944-BE5A-753129700A74","inputs":[{"id":"7717d000-eb0e-11ec-9b55-c70a3d793cb2","value":"{ $.GetTenantNameAndRegion }","type":"string","structure":[]},{"id":"cf8b5510-d90e-11ed-a579-cd38900fbf47","value":"name eq \"{ $.stageSpace }\"","type":"string","structure":[]},{"id":"1d91e290-d90f-11ed-80ea-9fec14e6d987","value":null,"type":"string","structure":[]},{"id":"71ea7180-d90f-11ed-a399-43da6346f683","value":null,"type":"string","structure":[]},{"id":"92cd6110-d90f-11ed-a57c-89623b3170d1","value":null,"type":"string","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-177,"y":525,"loopBlockId":"BB99438B-105E-4D67-BD3C-EFBC50D19074","datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","endpoint_guid":"76df5d40-eb0e-11ec-85e6-6fa92818449e","endpoint_role":"list"},{"id":"1227C740-B21D-4409-AE18-4420654AD0BB","type":"VariableBlock","disabled":false,"name":"stageSpace","displayName":"Variable - stageSpace","comment":"ENTER WORKSHOP STAGE SPACE","childId":"BCDC2FF1-48F2-4E71-A04E-D281019A095B","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-214,"y":564,"variableGuid":"229E6A52-50A6-4229-9B46-4246251FDA7D","operations":[{"id":"set_value","key":"79F54C91-F73B-486D-AEAA-9FC455224E78","name":"Set value of { variable }","value":"Workshop Stage"}]}],"variables":[{"guid":"15ACE45F-052A-495D-B273-B5489B883877","name":"appIds","type":"list"},{"guid":"3D49977C-10A0-4532-BF60-D64999AB1E08","name":"tags","type":"list"},{"guid":"9DF6E08D-A090-4F3A-BC3F-E95DBC89FB8A","name":"listCounter","type":"number"},{"guid":"A35EE007-7AD7-4DAE-92AE-5CFA6C3869BF","name":"users","type":"list"},{"guid":"2D53E22E-4EA6-493B-AC7E-FA3335AFD477","name":"appName","type":"list"},{"guid":"229E6A52-50A6-4229-9B46-4246251FDA7D","name":"stageSpace","type":"string"}]}
