{"blocks":[{"id":"754D4DF9-B3B6-4D12-B3C8-1A9351D4BF81","type":"StartBlock","disabled":false,"name":"Start","displayName":"Start","comment":"","childId":"F8ABD9D9-F0D1-47A4-AC98-D35717802234","inputs":[{"id":"run_mode","value":"scheduled","type":"select","structure":{}},{"id":"schedule_start","value":"2021-10-08 14:00:21","type":"date","structure":{}},{"id":"schedule_stoptime","value":null,"type":"date","structure":{}},{"id":"schedule_interval","value":"3600","type":"select","structure":{}},{"id":"schedule_timezone","value":"America/New_York","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":58,"y":-14},{"id":"BE527811-A62B-4318-9467-6615171E611E","type":"EndpointBlock","disabled":false,"name":"getCurrentTenantInfo","displayName":"Qlik Cloud Services - Get Current Tenant Info","comment":"","childId":"3131F7E9-7FF6-4663-BE66-5310AA656E6C","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":377,"y":126,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"55051480-cb86-11ec-b746-892c1d04114e","endpoint_role":"get"},{"id":"F8ABD9D9-F0D1-47A4-AC98-D35717802234","type":"VariableBlock","disabled":false,"name":"dataSpace","displayName":"Variable - dataSpace","comment":"Set the name of the source space","childId":"BE527811-A62B-4318-9467-6615171E611E","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":377,"y":246,"variableGuid":"38517AA4-A15F-4AF9-9D1D-E0C15DD5F8B4","operations":[{"id":"set_value","key":"E498EC02-3B4A-433C-8518-2E6BEE41C1A4","name":"Set value of { variable }","value":"Workshop Data"}]},{"id":"3131F7E9-7FF6-4663-BE66-5310AA656E6C","type":"VariableBlock","disabled":false,"name":"tenantHostname","displayName":"Variable - tenantHostname","comment":"Set the tenant hostname, e.g. `mytenant.us.qlikcloud.com`","childId":"3322B58B-2A53-4DD9-874D-C44382117C51","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":100,"y":460,"variableGuid":"D4D07856-ED88-4BFE-8D40-EEAE0F615D50","operations":[{"id":"set_value","key":"A17CE820-EB64-4CF9-97EF-634A871F06D8","name":"Set value of { variable }","value":"{ host: { $.getCurrentTenantInfo.links.self.href } }"}]},{"id":"3322B58B-2A53-4DD9-874D-C44382117C51","type":"SnippetBlock","disabled":false,"name":"GetTenantNameAndRegion","displayName":"Qlik Platform Operations - Get Tenant Name And Region","comment":"","childId":"C650ADC5-D225-47BA-9687-6DE823252921","inputs":[{"id":"575d1740-b1e2-11ed-958a-598edfec33b8","value":"{$.tenantHostname}","type":"string","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-378,"y":163,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","snippet_guid":"bd5c1ce0-ad14-11ed-83f6-1d42e53790dd"},{"id":"4EA3B810-8DC8-42DA-A860-5164DC700CAA","type":"SnippetBlock","disabled":false,"name":"ListDataFilesFromSpace","displayName":"Qlik Platform Operations - List Data Files From Space","comment":"","childId":"FA062842-73F8-47F3-A3FC-A8812145C245","inputs":[{"id":"d8e58e20-fa31-11ed-b2ac-0fffc605aad3","value":"{$.GetTenantNameAndRegion}","type":"string","structure":[]},{"id":"d8e63580-fa31-11ed-af74-112f69c5deee","value":"{ $.listSpaces.item.id }","type":"string","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":774,"y":693,"loopBlockId":null,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","snippet_guid":"f8db6b60-fa26-11ed-b985-a3ee665e0cb9"},{"id":"FA062842-73F8-47F3-A3FC-A8812145C245","type":"ShowBlock","disabled":false,"name":"output","displayName":"Output","comment":"","childId":"1E36FEA4-DFE9-4E43-BE39-B955E32F9A79","inputs":[{"id":"input","value":"Deleting {count: {$.ListDataFilesFromSpace}} data files in [{ $.listSpaces.item.name }/ { $.listSpaces.item.id }]","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":840},{"id":"1E36FEA4-DFE9-4E43-BE39-B955E32F9A79","type":"VariableBlock","disabled":false,"name":"fileCount","displayName":"Variable - fileCount","comment":"","childId":"ED50BC74-A18A-4AD5-AACE-2F86E0B666B5","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":1200,"variableGuid":"0706302B-D7C2-43A3-BBD6-3409A7A3BE7C","operations":[{"id":"set_value","key":"262E2EC6-DD62-4C17-BEE2-944CEED1ED86","name":"Set value of { variable }","value":"0"}]},{"id":"ED50BC74-A18A-4AD5-AACE-2F86E0B666B5","type":"ForEachBlock","disabled":false,"name":"loop","displayName":"Loop over Qlik Platform Operations - List Data Files From Space - Loop","comment":"Iterate over data files","childId":"1DAC4F15-527F-4E96-BA8B-3A26B31779B6","inputs":[{"id":"input","value":"{ $.ListDataFilesFromSpace }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-411,"y":1005.6025390625,"loopBlockId":"FAE117B6-D8A4-49FC-8E06-E770D54279EB"},{"id":"1DAC4F15-527F-4E96-BA8B-3A26B31779B6","type":"VariableBlock","disabled":false,"name":"message","displayName":"Variable - message","comment":"","childId":"A047D301-656D-4B19-B6B6-3AE639D9AA57","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":370,"y":1420,"variableGuid":"70946B3D-5F66-4AA9-A554-03EE27DF1E11","operations":[{"id":"set_value","key":"00EE0CFE-EFD8-4FB1-825E-363F4EAD1EC8","name":"Set value of { variable }","value":"Deleted {count: {$.ListDataFilesFromSpace}} data files in [{ $.listSpaces.item.name }/ { $.listSpaces.item.id }]"}]},{"id":"A047D301-656D-4B19-B6B6-3AE639D9AA57","type":"ShowBlock","disabled":false,"name":"output3","displayName":"Output 3","comment":"","childId":"4507E233-963B-43B4-97BD-EC763E6FF8FA","inputs":[{"id":"input","value":"{ $.message }","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":2100},{"id":"4507E233-963B-43B4-97BD-EC763E6FF8FA","type":"UpdateJobBlock","disabled":false,"name":"updateRunTitle2","displayName":"Update Run Title 2","comment":"","childId":null,"inputs":[{"id":"title","value":"{ $.message }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":370,"y":1540},{"id":"FAE117B6-D8A4-49FC-8E06-E770D54279EB","type":"VariableBlock","disabled":false,"name":"fileCount","displayName":"Variable - fileCount","comment":"","childId":"3C06D1EC-E56D-40D7-B707-F46FB6942BE3","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":1460,"variableGuid":"0706302B-D7C2-43A3-BBD6-3409A7A3BE7C","operations":[{"id":"add","key":"A0D439AD-2311-4084-B745-1B83BD193F20","name":"Add to { variable }","value":"1"}]},{"id":"3C06D1EC-E56D-40D7-B707-F46FB6942BE3","type":"VariableBlock","disabled":false,"name":"message","displayName":"Variable - message","comment":"","childId":"9F9FDE01-DF6A-4556-99DD-E9D6A81D572E","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":1420,"variableGuid":"70946B3D-5F66-4AA9-A554-03EE27DF1E11","operations":[{"id":"set_value","key":"00EE0CFE-EFD8-4FB1-825E-363F4EAD1EC8","name":"Set value of { variable }","value":"> Deleting data file {$.fileCount}/{count: { $.ListDataFilesFromSpace }} ({$.loop.item.name})"}]},{"id":"9F9FDE01-DF6A-4556-99DD-E9D6A81D572E","type":"UpdateJobBlock","disabled":false,"name":"updateRunTitle","displayName":"Update Run Title","comment":"","childId":"2A19A1A6-A41D-436F-BFC9-7DE432CAAFE8","inputs":[{"id":"title","value":"{ $.message }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":1540},{"id":"2A19A1A6-A41D-436F-BFC9-7DE432CAAFE8","type":"ShowBlock","disabled":false,"name":"output2","displayName":"Output 2","comment":"","childId":"F2BDCA88-8F80-486A-BADC-5937330E8922","inputs":[{"id":"input","value":"{ $.message }","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":1780},{"id":"F2BDCA88-8F80-486A-BADC-5937330E8922","type":"EndpointBlock","disabled":false,"name":"DeleteDataFile","displayName":"Qlik Platform Operations - Delete Data File","comment":"","childId":null,"inputs":[{"id":"f7e7b480-d863-11ed-a28a-370787b39f57","value":"{ $.GetTenantNameAndRegion }","type":"string","structure":[]},{"id":"f7eef030-d863-11ed-908a-53c868154f98","value":"{ $.loop.item.id }","type":"string","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-326,"y":1519.811767578125,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","endpoint_guid":"f7d86270-d863-11ed-a50a-f77431b8290d","endpoint_role":"delete"},{"id":"C650ADC5-D225-47BA-9687-6DE823252921","type":"EndpointBlock","disabled":false,"name":"listSpaces","displayName":"Qlik Cloud Services - List Spaces","comment":"","childId":"671CE392-65E7-41B3-9B6D-845BFB2B66F0","inputs":[],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-180,"y":814,"loopBlockId":"26DF2E16-24D3-4595-9AB9-84BF2695CCEA","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"42815920-5f18-11eb-8321-91b1587b6c06","endpoint_role":"list"},{"id":"26DF2E16-24D3-4595-9AB9-84BF2695CCEA","type":"IfElseBlock","disabled":false,"name":"condition","displayName":"Condition","comment":"","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.listSpaces.item.name }","input2":"{ $.dataSpace }","operator":"!="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-201,"y":635,"childTrueId":"4EA3B810-8DC8-42DA-A860-5164DC700CAA","childFalseId":null},{"id":"671CE392-65E7-41B3-9B6D-845BFB2B66F0","type":"EndpointBlock","disabled":false,"name":"getCurrentUserId","displayName":"Qlik Cloud Services - Get Current User Id","comment":"","childId":"49F9EBDD-93C7-4825-8F0C-695871A7D05F","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":138,"y":2421,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"6e9dbaa0-c7a4-11ea-9bd3-0da55b4cbed9","endpoint_role":"get"},{"id":"49F9EBDD-93C7-4825-8F0C-695871A7D05F","type":"EndpointBlock","disabled":false,"name":"listUsers","displayName":"Qlik Cloud Services - List Users","comment":"","childId":null,"inputs":[],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-299,"y":86,"loopBlockId":"3957A81B-AA89-4A6E-A45C-099FAFD9B602","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"53ca52b0-6f83-11eb-b06c-c5bdc3525ce4","endpoint_role":"list"},{"id":"3957A81B-AA89-4A6E-A45C-099FAFD9B602","type":"EndpointBlock","disabled":false,"name":"listDataFiles","displayName":"Qlik Cloud Services - List Data Files","comment":"","childId":null,"inputs":[{"id":"44da6400-f548-11ed-b69c-cd1f00885bf2","value":null,"type":"select","structure":[]},{"id":"5872f750-f548-11ed-8f4f-e153b2253f62","value":null,"type":"string","structure":[]},{"id":"bc104e50-f548-11ed-86e3-85b622a1703f","value":null,"type":"string","structure":[]},{"id":"eb7555a0-f548-11ed-b6a4-733648ff08a4","value":null,"type":"string","structure":[]},{"id":"00770740-f549-11ed-b0fa-afe239113bad","value":"{ $.listUsers.item.id }","type":"string","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-270,"y":416,"loopBlockId":"9D9864F1-A789-450E-8110-3048F2F8B18A","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"1250db90-f548-11ed-bb5c-31311462577f","endpoint_role":"list"},{"id":"9D9864F1-A789-450E-8110-3048F2F8B18A","type":"IfElseBlock","disabled":false,"name":"condition2","displayName":"Condition 2","comment":"","childId":"FFACBB49-3B10-4841-A38C-94FC31913F7F","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.listDataFiles.item.ownerId }","input2":"{ $.getCurrentUserId }","operator":"!="},{"input1":"{ $.listDataFiles.item.name }","input2":"cityGeo.qvd","operator":"!="},{"input1":"{ $.listDataFiles.item.name }","input2":"cityAliases.qvd","operator":"!="},{"input1":"{ $.listDataFiles.item.name }","input2":"countryGeo.qvd","operator":"!="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-305,"y":530,"childTrueId":"00035831-C345-4B19-BDED-F11410B77F9F","childFalseId":null},{"id":"FFACBB49-3B10-4841-A38C-94FC31913F7F","type":"EndpointBlock","disabled":false,"name":"DeleteDataFile2","displayName":"Qlik Platform Operations - Delete Data File 2","comment":"","childId":null,"inputs":[{"id":"f7e7b480-d863-11ed-a28a-370787b39f57","value":"{ $.GetTenantNameAndRegion }","type":"string","structure":[]},{"id":"f7eef030-d863-11ed-908a-53c868154f98","value":"{ $.listDataFiles.item.id }","type":"string","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":360,"y":920,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","endpoint_guid":"f7d86270-d863-11ed-a50a-f77431b8290d","endpoint_role":"delete"},{"id":"00035831-C345-4B19-BDED-F11410B77F9F","type":"EndpointBlock","disabled":false,"name":"ChangeDataFileOwner","displayName":"Qlik Platform Operations - Change Data File Owner","comment":"","childId":null,"inputs":[{"id":"842c17d0-f963-11ed-a721-2528ebd7c656","value":"{ $.GetTenantNameAndRegion }","type":"string","structure":[]},{"id":"84339850-f963-11ed-bd9d-67b12608eb6a","value":"{ $.listDataFiles.item.id }","type":"string","structure":[]},{"id":"843ee920-f963-11ed-a54a-39f55e8ed332","value":"{ $.getCurrentUserId }","type":"string","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":920,"datasourcetype_guid":"c7e48240-e0f2-11ec-ada1-d5ef75014b77","endpoint_guid":"841b8440-f963-11ed-808d-03748ef4d7d3","endpoint_role":"create"}],"variables":[{"guid":"00F775A5-65FB-4CBB-8A42-1397CD3D232B","name":"APIkey","type":"string"},{"guid":"98850931-C685-4F8F-B37E-0988DE9872DF","name":"FQDN","type":"string"},{"guid":"6C24B9B0-8607-4D49-AEC6-0ABF0B5C3E9B","name":"workshopData","type":"string"},{"guid":"70946B3D-5F66-4AA9-A554-03EE27DF1E11","name":"message","type":"string"},{"guid":"0706302B-D7C2-43A3-BBD6-3409A7A3BE7C","name":"fileCount","type":"number"},{"guid":"D4D07856-ED88-4BFE-8D40-EEAE0F615D50","name":"tenantHostname","type":"string"},{"guid":"38517AA4-A15F-4AF9-9D1D-E0C15DD5F8B4","name":"dataSpace","type":"string"}]}