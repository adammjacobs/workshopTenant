{"blocks":[{"id":"26609010-BC0A-4220-BCD7-349C64992F0A","type":"StartBlock","disabled":false,"name":"UserCreated","displayName":"User Created","comment":"","childId":"0BA681F9-8B13-4806-BDE3-BBBB479F5DC2","inputs":[{"id":"run_mode","value":"webhook","type":"select","structure":{}},{"id":"datasourcetype_guid","value":"61a87510-c7a3-11ea-95da-0fb0c241e75c","type":"select","displayValue":"Qlik Cloud Services","structure":[]},{"id":"webhook_event_guid","value":"5be4c220-6156-11eb-a3df-fdbac6cc38a0","type":"select","displayValue":"User Created","structure":[]},{"id":"test_payload","value":"{\n  \"data\": {\n    \"id\": \"example_4Py5kq5i3OhUWAfBauEyPd423eSNJF8X\",\n    \"subject\": \"example_auth0|f6b3fd7b7a3f625904134b89379372375300cff2dafc31a65a17cc093bb690b2\",\n    \"tenantId\": \"example_WL69WlNT4PRbwAA8EZ1sDblqjthluHL1\"\n  },\n  \"source\": \"com.qlik/users\",\n  \"eventId\": \"example_CGMoX8zP3RaPcGLKxQ_Sy5N4O0bh9XxE\",\n  \"eventTime\": \"2021-09-09T09:32:53.782Z\",\n  \"eventType\": \"com.qlik.v1.user.created\",\n  \"extensions\": {\n    \"userId\": \"example_BlVarUAUM9I0ei3MmKMejlDaF1sKPnN5\",\n    \"tenantId\": \"example_WL69WlNT4PRbwAA8EZ1sDblqjthluHL1\"\n  },\n  \"contentType\": \"application/json\",\n  \"eventTypeVersion\": \"1.0.0\",\n  \"cloudEventsVersion\": \"0.1\"\n}","type":"json","structure":[]},{"id":"webhook_documentation","value":null,"type":"string","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":100,"y":100,"logo":"https://cdn.qlikcloud.com/automations/logos/21dd4ad9985d490e7bfd7a644d783489.png"},{"id":"DBFC2473-C81B-4EF7-8EEF-3093CCAAB855","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest","displayName":"Qlik Cloud Services - Raw API Request","comment":"Assigns roles of \"consumer\", \"contributor\", and \"publisher\"","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"spaces/{ $.listSpaces.item.id }/assignments","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"{\n  \"type\": \"user\",\n  \"assigneeId\": \"{$.UserCreated.data.id}\",\n  \"roles\": [\n    \"consumer\",\n    \"contributor\",\n\"publisher\"\n  ]\n}","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":763,"y":403,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"get"},{"id":"AD5C3736-E568-416E-B00A-B664922DAA2A","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest3","displayName":"Qlik Cloud Services - Raw API Request 3","comment":"Assigns roles of \"consumer\" and \"contributor\"","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"spaces/{ $.listSpaces.item.id }/assignments","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"{\n  \"type\": \"user\",\n  \"assigneeId\": \"{$.UserCreated.data.id}\",\n  \"roles\": [\n    \"consumer\",\n    \"contributor\"\n  ]\n}","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":861,"y":694,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"get"},{"id":"EEDF4E44-3D66-4578-AE7D-F313F195AC7F","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest2","displayName":"Qlik Cloud Services - Raw API Request 2","comment":"Assigns role of \"data consumer\"","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"spaces/{ $.listSpaces.item.id }/assignments","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"{\n  \"type\": \"user\",\n  \"assigneeId\": \"{$.UserCreated.data.id}\",\n  \"roles\": [\n    \"dataconsumer\"\n  ]\n}","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":843,"y":461,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"get"},{"id":"752A111B-7E21-4FCA-B554-1DB441B2B2C3","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest4","displayName":"Qlik Cloud Services - Raw API Request 4","comment":"Assigns tenant roles of \"PrivateAnalyticsContentCreator\" and \"DataServicesContributor\"","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"users/{$.UserCreated.data.id}","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"PATCH","type":"select","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"[\n{\n    \"op\": \"replace\",\n    \"path\": \"/assignedRoles\",\n    \"value\": [\n      {\n        \"name\": \"PrivateAnalyticsContentCreator\"\n      },\n      {\n        \"name\": \"DataServicesContributor\"\n      }\n    ]\n  }\n]","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":682,"y":870,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"get"},{"id":"0BA681F9-8B13-4806-BDE3-BBBB479F5DC2","type":"EndpointBlock","disabled":false,"name":"listSpaces","displayName":"Qlik Cloud Services - List Spaces","comment":"","childId":"752A111B-7E21-4FCA-B554-1DB441B2B2C3","inputs":[],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-15,"y":589,"loopBlockId":"8C5905AC-587F-4885-BE9A-DA730618E1A2","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"42815920-5f18-11eb-8321-91b1587b6c06","endpoint_role":"list"},{"id":"8C5905AC-587F-4885-BE9A-DA730618E1A2","type":"CaseBlock","disabled":false,"name":"case","displayName":"Case","comment":"","childId":null,"inputs":[{"id":"expression","value":"{ $.listSpaces.item.description }","type":"string","structure":[]},{"id":"statements","value":["Main","Data","Published"],"type":"list","mode":"keyValue","structure":[]}],"settings":[],"collapsed":[{"name":"default","isCollapsed":false}],"x":524,"y":274,"statementChildrenIds":["AD5C3736-E568-416E-B00A-B664922DAA2A","EEDF4E44-3D66-4578-AE7D-F313F195AC7F","DBFC2473-C81B-4EF7-8EEF-3093CCAAB855"],"defaultChildId":null}],"variables":[]}
